<div class="container">
  <div class="titulo-wrapper">
    <h2 class="titulo-listado">Gestión de roles</h2>
  </div>
      <div class="busqueda-acciones">
        <button type="button" class="boton-nuevo" (click)="crearRol()">
            <span class="material-symbols-outlined">add</span>
            Añadir Rol
        </button>
    </div>
  <table class="table align-middle">
    <thead>
      <tr>
        <th scope="col">ROLES DEL SISTEMA</th>
        <th scope="col">CATEGORÍA</th>
        <th scope="col">ESTADO</th>
        <th scope="col">ACCIONES</th>
      </tr>
    </thead>

    <tbody>
      @for (rol of obtenerRolesPaginados(); track rol.id) {
        <tr>
            <td>
                {{ rol.nombreRol }}
                
            </td>
            <td>
                {{ rol.categoriaRol?.nombreCategoriaRol || '-' }}
            </td>
            <td>
                <span class="estado-badge"
                    [ngClass]="{ 'habilitado': !rol.fechaHoraBaja, 'deshabilitado': rol.fechaHoraBaja }">
                {{ rol.fechaHoraBaja ? 'DESHABILITADO' : 'HABILITADO' }}
                </span>
            </td>
          <td>
          <button class="icon-button-celeste"
                (click)="modificarRol(rol.id!)"
                title="Modificar">
                <span class="material-symbols-outlined">edit</span>
          </button>

            @if (!rol.fechaHoraBaja) {
              <button class="icon-button-rojo"
                      (click)="deshabilitarRol(rol.id!)"
                      title="Deshabilitar">
                <span class="material-symbols-outlined">disabled_by_default</span>
              </button>
            } @else {
              <button class="icon-button-verde"
                      (click)="habilitarRol(rol.id!)"
                      title="Habilitar">
                <span class="material-symbols-outlined">check_box</span>
              </button>
            }
          </td>
        </tr>
      }
    </tbody>
  </table>

  <nav *ngIf="totalPaginas > 1">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="paginaActual === 1">
        <button class="page-link" (click)="retrocederPagina()">Anterior</button>
      </li>

      <!-- Mantengo *ngFor acá como dijiste -->
      <li *ngFor="let pagina of paginas"
          class="page-item"
          [class.active]="paginaActual === pagina">
        <button class="page-link" (click)="irAPagina(pagina)">
          {{ pagina }}
        </button>
      </li>

      <li class="page-item" [class.disabled]="paginaActual === totalPaginas">
        <button class="page-link" (click)="avanzarPagina()">Siguiente</button>
      </li>
    </ul>
  </nav>
</div>
