<div class="perfil-wrapper">
  <div class="perfil-header">
    <div>
      <h1>Mi perfil</h1>
      <p>Gestiona tu información personal</p>
    </div>
    @if (!modoEdicion) {
      <button type="button" class="boton" (click)="modificarCandidato()">
        <span class="material-symbols-outlined">edit</span>
        Editar
      </button>
    } @else {
      <button type="button" class="boton" (click)="volver()">
        <span class="material-symbols-outlined">arrow_back</span>
        Volver
      </button>
    }
  </div>

  <form>
    <div class="form-grid-foto">
      <div class="foto-seccion">
        <img [src]="'assets/img/foto-perfil.png'" alt="foto" class="foto" />
        <label for="foto">Editar foto</label>
      </div>
      <div class="al-lado m-0 p-0">
        <div class="form-group">
          <label for="nombreCandidato" class="p-0 my-0 mb-2">Nombre</label>
          <input 
            type="text"
            class="form-control"
            name="nombreCandidato"
            [readonly]="!modoEdicion">
            <!-- [(ngModel)]="empresa.nombreEmpresa"> -->
        </div>
        <div class="form-group">
          <label for="apellidoCandidato" class="p-0 my-0 mb-2 mt-3">Apellido</label>
          <input 
            type="text"
            class="form-control"
            name="apellidoCandidato"
            [readonly]="!modoEdicion">
            <!-- [(ngModel)]="empresa.nombreEmpresa"> -->
        </div>
      </div>
      <div class="abajo m-0 full-width">
        <div class="form-grid">
          <div class="form-group">
            <label for="fechaNacimientoCandidato" class="p-0 my-0 mb-2">Fecha de nacimiento</label>
            <input 
            type="date"
            class="form-control"
            name="fechaNacimientoCandidato"
            readonly>
            <!-- [(ngModel)]="empresa.telefonoEmpresa"> -->
          </div>
          <div class="form-group">
            <label for="generoCandidato" class="p-0 my-0 mb-2">Género</label>
            <select 
              class="form-select"
              name="generoCandidato"
              [disabled]="!modoEdicion"
              id="generoCandidato">
              <!-- [(ngModel)]="candidato.genero"> -->
              @for (genero of generos; track genero.id) {
                <option [ngValue]="genero">
                  {{ genero.nombreGenero }}
                </option>
              }
            </select>
          </div>
          <div class="form-group">
            <label for="paisCandidato" class="p-0 my-0 mb-2">País</label>
            <select 
              class="form-select"
              name="paisCandidato"
              [disabled]="!modoEdicion"
              id="paisCandidato">
              <!-- [(ngModel)]="candidato.genero"> -->
              @for (pais of paises; track pais.id) {
                <option [ngValue]="pais">
                  {{ pais.nombrePais }}
                </option>
              }
            </select>
            <!-- <input 
            type="text"
            class="form-control"
            name="paisCandidato"
            [readonly]="!modoEdicion">
            [value]="nombrePais"> -->
          </div>
          <div class="form-group">
            <label for="provinciaCandidato" class="p-0 my-0 mb-2">Provincia</label>
            <select 
              class="form-select"
              name="provinciaCandidato"
              [disabled]="!modoEdicion"
              id="provinciaCandidato">
              <!-- [(ngModel)]="candidato.genero"> -->
              @for (provincia of provincias; track provincia.id) {
                <option [ngValue]="provincia">
                  {{ provincia.nombreProvincia }}
                </option>
              }
            </select>
            <!-- <input 
            type="text"
            class="form-control"
            name="provinciaCandidato"
            [readonly]="!modoEdicion">
            [value]="empresa.provincia?.nombreProvincia"> -->
          </div>
        </div>
        <div class="form-group">
          <label for="emailCandidato" class="p-0 my-0 mb-2">Correo Electrónico</label>
          <input 
            type="text"
            class="form-control"
            name="emailCandidato"
            readonly>
            <!-- [value]="empresa.emailEmpresa"> -->
        </div>
        <div class="form-group full-width">
          <label for="contrasenia" class="p-0 my-0 mb-2">Contraseña</label>
          <div class="input-group">
            <input 
              [type]="verContrasenia ? 'text' : 'password'"
              class="form-control"
              name="contrasenia"
              [readonly]="!modoEdicion">
              <!-- [(ngModel)]="empresa.usuario!.contraseniaUsuario" -->
              <!-- (input)="mostrarCampoRepetir = !!empresa.usuario?.contraseniaUsuario"> -->
            <span class="input-group-text" (click)="verContrasenia = !verContrasenia" style="cursor: pointer;">
              <span class="material-symbols-outlined">
                {{ verContrasenia ? 'visibility' : 'visibility_off' }}
              </span>
            </span>
          </div>
        </div>
        @if (mostrarCampoRepetir) {
          <div class="form-group full-width">
            <label for="repetirContrasenia" class="p-0 my-0 mb-2">Repetir contraseña</label>
            <div class="input-group">
              <input
                [type]="verContrasenia ? 'text' : 'password'"
                class="form-control"
                name="repetirContrasenia"
                [(ngModel)]="repetirContrasenia"
                [readonly]="!modoEdicion"/>
              <span class="input-group-text" (click)="verContrasenia = !verContrasenia" style="cursor: pointer;">
                <span class="material-symbols-outlined">
                  {{ verContrasenia ? 'visibility' : 'visibility_off' }}
                </span>
              </span>
            </div>
          </div>
        }
        <div class="form-grid">
          <div class="form-group cv-wrapper">
            <label class="p-0 my-0 mb-2" for="cv">Curriculum Vitae</label>
            <div class="cv-box-contenedor">
              <div class="cv-box">
                <span class="material-symbols-outlined icono-pdf">description</span>
                <div class="cv-detalle">
                  <p>
                    <a href="#">
                      AgustinaMartin_CV.pdf
                    </a>
                  </p>
                  <small>Actualizado el 10/05/2025</small>
                </div>
              </div>
              <div class="cv-acciones">
                <span class="material-symbols-outlined editar-cv" title="Editar">edit</span>
                <span class="material-symbols-outlined eliminar-cv" title="Eliminar">delete</span>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="p-0 my-0 mb-2">Estado de búsqueda laboral</label>
            <span
            class="badge"
            [ngClass]="{
              'no-disponible': candidato.estadoBusqueda?.nombreEstadoBusqueda === 'No disponible',
              'escucho-ofertas': candidato.estadoBusqueda?.nombreEstadoBusqueda === 'Escucho ofertas',
              'buscando-activamente': candidato.estadoBusqueda?.nombreEstadoBusqueda === 'Buscando activamente'
            }"  
            >
              {{ candidato.estadoBusqueda?.nombreEstadoBusqueda?.toUpperCase() }}
            </span>
          </div>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label>Habilidades</label>
      <button>
        <span class="material-symbols-outlined">add</span>

      </button>
      <div class="habilidades">
        <span class="tag">HTML</span>
        <span class="tag">CSS</span>
        <span class="tag">Java</span>
        <span class="tag">Figma</span>
        <span class="tag">Git</span>
      </div>
    </div> 
  </form>
  <div class="modo-edicion">
    @if (modoEdicion) {
    <button type="button" class="boton-eliminar" >
      <span class="material-symbols-outlined">delete</span>
      Eliminar cuenta
    </button>
    <button type="button" class="boton-guardar ml-auto" >
      <span class="material-symbols-outlined">save</span>
      Guardar cambios
    </button>
    }
  </div>
    <!-- <div class="form-grid-avatar">
      <div class="avatar-seccion">
        <img src="https://bucket-s3-workee.s3.amazonaws.com/perfiles/usuario1.jpg" alt="avatar" class="avatar" />
        <label>avatar</label>
      </div>

      <div class="al-lado">
        <div class="form-group">
          <label for="nombre">Nombre</label>
          <input id="nombre" type="text" formControlName="nombre" value="Agustina" />
        </div>

        <div class="form-group">
          <label for="apellido">Apellido</label>
          <input id="apellido" type="text" formControlName="apellido" value="Martín" />
        </div>
      </div>
    </div>
    
    <div class="form-grid">
      <div class="form-group">
        <label for="fechaNacimiento">Fecha de Nacimiento</label>
        <input id="fechaNacimiento" type="text" formControlName="fechaNacimiento" value="05/03/2003" />
      </div>
      
      <div class="form-group">
        <label for="genero">Género</label>
        <input id="genero" type="text" formControlName="genero" value="Mujer" />
      </div>
      
      <div class="form-group">
        <label for="pais">País</label>
        <input id="pais" type="text" formControlName="pais" value="Argentina" />
      </div>
      
      <div class="form-group">
        <label for="provincia">Provincia</label>
        <input id="provincia" type="text" formControlName="provincia" value="Mendoza" />
      </div>
    </div>
    
    <div class="correo-contraseña-CV-EDBL">
      <div class="form-group">
        <label for="email">Correo Electrónico</label>
        <input id="email" type="email" formControlName="email" value="agustinamartin@gmail.com" />
      </div>
      
      <div class="form-group">
        <label for="password">Contraseña</label>
        <input id="password" type="password" formControlName="password" value="*********" />
      </div>
      
      <div class="form-grid">
        <div class="form-group">
          <label for="cv">Curriculum Vitae</label>
          <div class="cv-box">
            <i class="icono-pdf"></i>
            <div class="cv-detalle">
              <p>
                <a href="https://bucket-s3-workee.s3.amazonaws.com/cvs/AgustinaMartin_CV.pdf" download target="_blank">
                  AgustinaMartin_CV.pdf
                </a>
              </p>
              <small>Actualizado el 10/05/2025</small>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label>Estado de búsqueda laboral</label>
          <span class="badge no-disponible">NO DISPONIBLE</span>
        </div>
      </div>
    </div>
    -->

