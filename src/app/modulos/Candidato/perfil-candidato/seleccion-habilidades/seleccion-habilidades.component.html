<div class="modal-content">
    <div class="modal-header">
        <h5 class="modal-title">Selección de habilidades</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="dismissModal()" aria-label="Close"></button>
    </div>
    <div class="modal-body">
        <div class="input-search-wrapper">
            <input 
                type="text" 
                placeholder="Buscar habilidades..." 
                class="input-search"
                [(ngModel)]="filtro"
                (input)="buscarHabilidades()" />
            <button id="icon-button" (click)="buscarHabilidades()">
                <span class="material-symbols-outlined search-icon">search</span>
            </button>
        </div>
        <div class="d-flex">
            <div class="list-group me-3" style="min-width: 200px;">
                @for (tipo of tipoHabilidadList; track $index) {
                    <button 
                        class="list-group-item list-group-item-action" 
                        [class.active]="tipo === tipoSeleccionado"
                        (click)="seleccionarTipo(tipo)">
                        @if (tipo.nombreTipoHabilidad === "Habilidades blandas") {
                            <span class="material-symbols-outlined">diversity_1</span>
                        } @else if (tipo.nombreTipoHabilidad === "Habilidades técnicas") {
                            <span class="material-symbols-outlined">handyman</span>
                        } @else {
                            <span class="material-symbols-outlined">psychology</span>
                        }
                        {{ tipo.nombreTipoHabilidad }}
                    </button>
                }
            </div>
            <div class="flex-grow-1 border rounded p-3" style="max-height: 250px; overflow-y: auto;">
                @if (habilidadList.length === 0) {
                    <div class="sin-resultados">
                        <img src="assets\sin-resultados.png" alt="No hay resultados" class="sin-resultados-img">
                        <p class="sin-resultados-txt">
                            No encontramos habilidades que coincidan con tu búsqueda
                        </p>
                    </div>
                }
                @for (habilidad of habilidadList; track $index) {
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" 
                                [id]="'hab_' + habilidad.id"
                                [checked]="estaSeleccionada(habilidad)" 
                                (change)="toggleHabilidad(habilidad)">
                        <label class="form-check-label" [for]="'hab_' + habilidad.id">
                            {{ habilidad.nombreHabilidad }}
                        </label>
                    </div>
                }
            </div>
        </div>
        <div *ngIf="habilidadesSeleccionadas.length !== 0" class="border habilidades-seleccionadas">
        <h5 class="mb-2">Habilidades seleccionadas</h5>
            <div *ngFor="let tipo of tipoHabilidadList; trackBy: trackByTipo">
                <ng-container *ngIf="habilidadesSeleccionadasPorTipo(tipo).length > 0">
                <strong>{{ tipo.nombreTipoHabilidad }}</strong>
                <div class="mt-1 mb-2 d-flex flex-wrap gap-2">
                    <span *ngFor="let hab of habilidadesSeleccionadasPorTipo(tipo); trackBy: trackByHabilidad" class="badge">
                    {{ hab.habilidad?.nombreHabilidad }}
                    <button type="button" class="btn-close btn-close-black ms-1 btn-quitar" aria-label="Eliminar" 
                            (click)="quitarHabilidad(hab)"></button>
                    </span>
                </div>
                </ng-container>
            </div>
        </div>
        <div class="fin-modal">
            <button type="button" class="boton-volver-gris" (click)="dismissModal()">
                <span class="material-symbols-outlined">arrow_back</span>
                Volver
            </button>
            <button type="button" class="boton-guardar ml-auto" (click)="volverAPerfil()" >
                <span class="material-symbols-outlined">save</span>
                Guardar cambios
            </button>
        </div>
    </div>
</div>